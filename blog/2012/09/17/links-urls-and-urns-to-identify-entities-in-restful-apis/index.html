
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Links, URLs and URNs to identify entities in RESTful APIs - derjan</title>
  <meta name="author" content="Jan Ehrhardt">

  
  <meta name="description" content="Modern APIs are RESTful. It is a
good idea, since REST is based on the main principles of the
WWW like
HTTP and
URLs. URLs allow browsers to
identify &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://derjan.io/blog/2012/09/17/links-urls-and-urns-to-identify-entities-in-restful-apis/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/derjanio" rel="alternate" title="derjan" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-9257831-16']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">derjan</a></h1>
  
    <h2>about code and coding</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/derjanio" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:derjan.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Links, URLs and URNs to identify entities in RESTful APIs</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-17T23:30:00+02:00" pubdate data-updated="true">Sep 17<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Modern APIs are <a href="https://en.wikipedia.org/wiki/REST">RESTful</a>. It is a
good idea, since REST is based on the main principles of the
<a href="https://en.wikipedia.org/wiki/WWW">WWW</a> like
<a href="https://en.wikipedia.org/wiki/HTTP">HTTP</a> and
<a href="https://en.wikipedia.org/wiki/URL">URLs</a>. URLs allow browsers to
identify resources.</p>

<p>But how are you dealing with URLs in your API? Are you telling your
users how to create URLs?  And what is about navigation?  Do your
users know how to navigate through the data your API offers? Knowing
some basic priciples might improve your APIs a lot.</p>

<!--more-->


<h2>Starting small</h2>

<p>Most applications start small. So let us look at a simple example a
photo album application. Everytime a user opens the URL of a photo
album in his browser, a HTML page is loaded. In this case, the page
might contain thumbnails of all the photos from the album. The
thumbnails might be hyperlinks pointing to the URL of the image
details. If the user clicks on the thumbnail a new HTML page opens
with a bigger view of the picture and probably more information about
it.</p>

<p>This simple case contains a really powerful concept - hyperlinking. If
we want to provide a mobile app to our users or an API for third party
developers, we should adapt this awesome concept to our API.</p>

<p>In JSON based formats hyperlinks can be put into an attribute called
links, which is an array of link objects. This might look like below.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span><span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>  <span class="p">{</span><span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Cool picture&quot;</span><span class="p">,</span>
</span><span class='line'>   <span class="nt">&quot;rel&quot;</span><span class="p">:</span> <span class="s2">&quot;details&quot;</span><span class="p">,</span>
</span><span class='line'>   <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;https://example.org/albums/12/photos/13&quot;</span><span class="p">}</span>
</span><span class='line'><span class="p">]}</span>
</span></code></pre></td></tr></table></div></figure>


<p>A mobile app can also show the thumbnails and store locally the URL
from the link object. When the user tabs with his finger on the image,
the app can do the same as the browser does. It can simply follow URL
from the link to show the image details.</p>

<h2>The power of links, when you grow</h2>

<p>Hopefully our service is growing and a simple monolithic web
application with a MySQL database does not work anymore. So we are
starting to store our image files and metadata in a different
application highly optimized to store masses of photos. This is where
hyperlinking shows it&#8217;s real power.</p>

<p>Our new photo storage application might provide URLs with a completely
different structur. The URLs even might point to a different subdomain
as our web application. While the image tags in our HTML contain other
URLs, the browser does not care about any change at this point.</p>

<p>Different to the browser, the JSON for our mobile app might now be
served partially by the photo storage application. This is possible,
since the app does not know anything about the URL. It just gets it
from a link object in the JSON document.</p>

<h2>Where hyperlinking does not fit anymore</h2>

<p>Although hyperlinking allows clients to behave similar to browsers and
thus become more independent of URL structurs, this concept is
limited. It works well, when the client has a temporary local state,
where the links are stored.</p>

<p>When a user now opens the URL of a photo album in the browser, how
does the photo album application on the server know, which thumbnail
URLs it should put to the image tags? The applications could store
some redundant data, that allows some mapping. Or the album
application might store the URLs to the photos in the storage
application. Both are no good solution to the problem.</p>

<p>The problem lies in the URLs, since the L is for location, an URL does
not identify an entity of our application, it identifies a location,
where the entity can be found. Well it is an easy task to create
different URLs all pointing to the same entity. But how can entities
be identified in RESTful APIs? Even across different applications or
companies?</p>

<p>There are two classes of
<a href="https://en.wikipedia.org/wiki/URI">URIs</a>. URLs are one of them and
<a href="https://en.wikipedia.org/wiki/Uniform_Resource_Name">URNs</a> are the
other. The N in URN is for name and thus a URN is a name or better an
identifier for an entity. In a JSON format simply place the URN into
an id attribute for the object. The client can now store a global
identifier, that works location independent.</p>

<p>Using a URN like <em>urn:my-company:photo:13</em> allows us to store an id
for each photo from the storage application in the album&#8217;s
database. At same time we can define a simple mapping between URNs and
URLs using <a href="http://tools.ietf.org/html/rfc6570">URI templates</a>.</p>

<p>Using ids is not as smart as hyperlinks, but with URNs they can be
handled also pretty well.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Jan Ehrhardt</span></span>

      








  


<time datetime="2012-09-17T23:30:00+02:00" pubdate data-updated="true">Sep 17<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/restful-apis/'>RESTful APIs</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://derjan.io/blog/2012/09/17/links-urls-and-urns-to-identify-entities-in-restful-apis/" data-via="derjan" data-counturl="http://derjan.io/blog/2012/09/17/links-urls-and-urns-to-identify-entities-in-restful-apis/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/09/11/applying-the-test-automation-pyramid-to-the-real-world/" title="Previous Post: Applying the test automation pyramid to the real world">&laquo; Applying the test automation pyramid to the real world</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/10/06/discovery-of-java-land/" title="Next Post: Discovery of Java Land">Discovery of Java Land &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/10/25/git-as-svn-client-with-multiple-branches/">Git as SVN client with multiple branches</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/23/you-should-not-use-gwt/">You should not use GWT</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/22/successful-devops-keep-their-focus-on-applications/">Successful DevOps keep their focus on applications</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/16/we-do-not-trust-our-unit-tests/">We do not trust our unit tests</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/06/discovery-of-java-land/">Discovery of Java Land</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/jehrhardt">@jehrhardt</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'jehrhardt',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("derjan", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/derjan" class="twitter-follow-button" data-show-count="false">Follow @derjan</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  By Jan Ehrhardt - Licensed under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a> -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'derjanio';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://derjan.io/blog/2012/09/17/links-urls-and-urns-to-identify-entities-in-restful-apis/';
        var disqus_url = 'http://derjan.io/blog/2012/09/17/links-urls-and-urns-to-identify-entities-in-restful-apis/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
