
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Why does your Java class have no constructors? - derjan</title>
  <meta name="author" content="Jan Ehrhardt">

  
  <meta name="description" content="In Java land almost everyone is using frameworks like
Spring or
Guice to do
Dependency Injection.
Sadly these frameworks are able to deal with code &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://derjan.io/blog/2012/11/01/why-does-your-java-class-have-no-constructors/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/derjanio" rel="alternate" title="derjan" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-9257831-16']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">derjan</a></h1>
  
    <h2>about code and coding</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/derjanio" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:derjan.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Why does your Java class have no constructors?</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-11-01T08:28:00+01:00" pubdate data-updated="true">Nov 1<span>st</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>In Java land almost everyone is using frameworks like
<a href="http://www.springsource.org">Spring</a> or
<a href="https://code.google.com/p/google-guice/">Guice</a> to do
<a href="https://en.wikipedia.org/wiki/Dependency_injection">Dependency Injection</a>.
Sadly these frameworks are able to deal with code like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorld</span> <span class="o">{</span>
</span><span class='line'>  <span class="nd">@Inject</span>
</span><span class='line'>  <span class="kd">private</span> <span class="n">GreetingProvider</span> <span class="n">greetingProvider</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>These frameworks use the power of Java&#8217;s reflection API to set a
private variable to a value at runtime without a constructor or a
setter method. Since this reduces the number of lines, many developers
are using this feature frequently. So what is wrong with this?</p>

<p>First it makes you addicted to some framework or library. You cannot
run this code without a framework handling the dependency. Even your
unit test requires something do deal with this. This is <strong>no</strong> valid
Java code!</p>

<p>The second point is, it results in very bad API design. Like it or
not, each class you are writing has an external API and you should
always care about the design of this API. In the above case nobody
knows about your API, because it is hidden. The real API includes a
dependency to a Dependency Injection framework, but this fact is not
made explicit in the API. People are telling me, that they do not like
dynamic languages, since there are no declared types in the method
signature. But then the same people are writing code like above.</p>

<p>But how can we do better?</p>

<p>There is only one way, you should do Dependency Injection. Use a
constructor! This results in code like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorld</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">private</span> <span class="kd">final</span> <span class="n">GreetingProvider</span> <span class="n">greetingProvider</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Inject</span>
</span><span class='line'>  <span class="kd">public</span> <span class="nf">HelloWorld</span><span class="o">(</span><span class="n">GreetingProvider</span> <span class="n">greetingProvider</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">this</span><span class="o">.</span><span class="na">greetingProvider</span> <span class="o">=</span> <span class="n">greetingProvider</span><span class="o">;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>But if you think there is to much code, learn and use another laguage!
The same in Scala:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">class</span> <span class="nc">HelloWorld</span><span class="o">(</span><span class="n">greetingProvider</span><span class="k">:</span> <span class="kt">GreetingProvider</span><span class="o">)</span> <span class="o">{}</span>
</span></code></pre></td></tr></table></div></figure>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Jan Ehrhardt</span></span>

      








  


<time datetime="2012-11-01T08:28:00+01:00" pubdate data-updated="true">Nov 1<span>st</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/api-design/'>API Design</a>, <a class='category' href='/blog/categories/clean-code/'>Clean Code</a>, <a class='category' href='/blog/categories/java/'>Java</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://derjan.io/blog/2012/11/01/why-does-your-java-class-have-no-constructors/" data-via="derjan" data-counturl="http://derjan.io/blog/2012/11/01/why-does-your-java-class-have-no-constructors/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/10/27/emacs-as-default-editor-for-git/" title="Previous Post: Emacs as default editor for Git">&laquo; Emacs as default editor for Git</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/11/26/making-stateless-applications-deal-with-restful-state/" title="Next Post: Making stateless applications deal with RESTful state">Making stateless applications deal with RESTful state &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/01/08/emacs-as-primary-text-editor-for-lazy-developers/">Emacs as primary text editor for lazy developers</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/11/multiple-versions-of-grails-with-homebrew/">Multiple versions of Grails with Homebrew</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/27/there-is-no-need-for-spring-in-scala-code/">There is no need for Spring in Scala code</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/26/making-stateless-applications-deal-with-restful-state/">Making stateless applications deal with RESTful state</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/01/why-does-your-java-class-have-no-constructors/">Why does your Java class have no constructors?</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/jehrhardt">@jehrhardt</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'jehrhardt',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("derjan", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/derjan" class="twitter-follow-button" data-show-count="false">Follow @derjan</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Jan Ehrhardt -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'derjanio';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://derjan.io/blog/2012/11/01/why-does-your-java-class-have-no-constructors/';
        var disqus_url = 'http://derjan.io/blog/2012/11/01/why-does-your-java-class-have-no-constructors/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
